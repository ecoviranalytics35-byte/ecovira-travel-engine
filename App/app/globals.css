@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================
   RESET
============================ */
html, body { 
  padding: 0 !important; 
  margin: 0 !important; 
}
* { box-sizing: border-box; }

/* ============================
   THEME TOKENS (KEEP)
============================ */
:root {
  /* Neutrals (dark luxury) */
  --ec-bg: #07080A;
  --ec-bg-2: #0F1114;
  --ec-card: rgba(15, 17, 20, 0.58);
  --ec-card-2: rgba(21, 24, 29, 0.62);
  --ec-border: rgba(255, 255, 255, 0.08);
  --ec-text: #EDEDED;
  --ec-muted: rgba(237, 237, 237, 0.68);
  --ec-dim: rgba(237, 237, 237, 0.50);

  /* Brand accents */
  --ec-teal: #1C8C82;
  --ec-teal-d: #0F6B63;
  --ec-teal-glow: rgba(28, 140, 130, 0.35);
  --ec-gold: #C8A24D;
  --ec-gold-2: #E3C77A;
  --ec-gold-glow: rgba(200, 162, 77, 0.20);

  /* Radii */
  --ec-r-lg: 20px;
  --ec-r-md: 16px;
  --ec-r-sm: 12px;

  /* Shadows (premium) */
  --ec-shadow-card: 0 18px 60px rgba(0,0,0,0.55);
  --ec-shadow-hairline: 0 0 0 1px rgba(28,140,130,0.18);

  /* Legacy compatibility */
  --ec-bg-primary: var(--ec-bg-2);
  --ec-bg-secondary: linear-gradient(180deg, #0B0D10 0%, #0F1114 40%, #07080A 100%);
  --ec-bg-glass: var(--ec-card);
  --ec-bg-glass-hover: var(--ec-card-2);
  --ec-teal-primary: var(--ec-teal);
  --ec-teal-hover: var(--ec-teal);
  --ec-teal-border: rgba(28, 140, 130, 0.22);
  --ec-teal-border-hover: rgba(28, 140, 130, 0.45);
  --ec-gold-primary: var(--ec-gold);
  --ec-gold-secondary: var(--ec-gold-2);
  --ec-text-primary: var(--ec-text);
  --ec-text-secondary: var(--ec-muted);
  --ec-text-muted: var(--ec-dim);
  --ec-radius-card: var(--ec-r-lg);
  --ec-radius-button: var(--ec-r-md);
  --ec-radius-input: var(--ec-r-md);
  --ec-shadow-glass: var(--ec-shadow-card);
  --ec-shadow-glass-hover: var(--ec-shadow-card);
}

/* ============================
   BASE GLOBAL LOOK (PREMIUM)
============================ */
@layer base {
  /* CRITICAL: html must NOT be a scroll container for sticky to work */
  html {
    overflow-x: hidden;
    overflow-y: visible; /* Prevent html from becoming scroll container */
    height: auto; /* No height constraint */
  }

  /* CRITICAL: body MUST be the scroll container for sticky positioning */
  body {
    /* Body is the scroll container - this is required for sticky */
    overflow-x: hidden;
    overflow-y: auto;
    /* No height constraint that could break sticky */
    height: auto;
    min-height: 100vh;
    /* Ensure body is the positioning context */
    position: relative;
    background:
      radial-gradient(900px 600px at 20% 10%, rgba(28,140,130,0.16), transparent 55%),
      radial-gradient(900px 600px at 80% 0%, rgba(200,162,77,0.12), transparent 55%),
      var(--ec-bg-secondary);
    color: var(--ec-text);
    font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  /* CRITICAL: Prevent any wrapper divs from creating scroll containers */
  /* React Context.Provider components don't render divs, but this ensures no wrappers break sticky */
  /* Only target potential wrapper divs, not all elements */
  body > div:not([class*="fixed"]):not([class*="absolute"]):not([id*="__next"]) {
    /* Prevent non-positioned divs from creating scroll containers */
    overflow: visible !important;
  }

  /* CRITICAL: Ensure Next.js root div doesn't create scroll container or transform context */
  body > div#__next,
  body > div[id*="__next"] {
    overflow: visible !important;
    transform: none !important;
    height: auto !important;
  }


  /* Typography hierarchy (stops “wikipedia” feel) */
  h1 { font-size: 44px; line-height: 1.05; font-weight: 700; letter-spacing: -0.02em; }
  h2 { font-size: 30px; line-height: 1.15; font-weight: 650; letter-spacing: -0.01em; }
  h3 { font-size: 20px; line-height: 1.2; font-weight: 600; }
  p  { color: var(--ec-muted); line-height: 1.65; }

  /* Links: clean + premium */
  a { text-decoration: none; color: inherit; }
  a:visited { color: inherit; }
  a:hover { text-decoration: none; }

  /* Selection */
  ::selection { background: rgba(28,140,130,0.35); color: var(--ec-text); }

  /* Focus rings */
  :focus-visible {
    outline: 3px solid rgba(28,140,130,0.35);
    outline-offset: 2px;
    border-radius: 12px;
  }
}

/* ============================
   FORMS (FIX BLACK TEXT + MAKE PREMIUM)
============================ */
@layer base {
  input, select, textarea {
    color: var(--ec-text) !important;
    background-color: rgba(15, 17, 20, 0.62) !important;
    border: 1px solid rgba(28,140,130,0.22) !important;
    border-radius: var(--ec-radius-input) !important;
    min-height: 52px;
    padding: 0 16px;
    font-size: 15px;
    line-height: 1.2;
    box-shadow: var(--ec-shadow-hairline);
  }

  input::placeholder, textarea::placeholder {
    color: rgba(237, 237, 237, 0.42) !important;
  }

  input:focus, select:focus, textarea:focus {
    border-color: rgba(28,140,130,0.55) !important;
    box-shadow:
      0 0 0 3px rgba(28,140,130,0.20),
      0 18px 60px rgba(0,0,0,0.35);
    outline: none !important;
  }

  input:disabled, select:disabled, textarea:disabled {
    opacity: 0.65;
    cursor: not-allowed;
    background-color: rgba(15, 17, 20, 0.40) !important;
  }

  /* Autofill fix (prevents black text) */
  input:-webkit-autofill,
  input:-webkit-autofill:hover,
  input:-webkit-autofill:focus,
  input:-webkit-autofill:active {
    -webkit-text-fill-color: var(--ec-text) !important;
    -webkit-box-shadow: 0 0 0px 1000px rgba(15, 17, 20, 0.62) inset !important;
    box-shadow: 0 0 0px 1000px rgba(15, 17, 20, 0.62) inset !important;
    transition: background-color 9999s ease-in-out 0s;
  }

  select option {
    background-color: var(--ec-bg-2) !important;
    color: var(--ec-text) !important;
  }

  /* Labels (premium, spaced, readable) */
  label {
    display: block;
    margin-bottom: 8px;
    font-size: 12px;
    letter-spacing: 0.14em;
    text-transform: uppercase;
    color: rgba(237,237,237,0.65);
  }
}

/* ============================
   PREMIUM COMPONENT CLASSES (USE THESE)
============================ */
@layer components {
  /* Global page container (stops cramped look) */
  .ec-container {
    @apply mx-auto w-full;
    max-width: 1400px;
    padding-left: 32px;
    padding-right: 32px;
  }

  /* Page rhythm */
  .ec-page {
    padding-top: 28px;
    padding-bottom: 72px;
  }
  .ec-section {
    margin-top: 36px;
    margin-bottom: 36px;
  }

  /* Premium glass card */
  .ec-card {
    background: linear-gradient(180deg, rgba(21,24,29,0.66), rgba(15,17,20,0.56));
    border: 1px solid rgba(28,140,130,0.22);
    border-radius: var(--ec-radius-card);
    box-shadow: var(--ec-shadow-card);
    padding: 34px;
  }

  /* Search panel layout helpers - Horizontal grid */
  .ec-grid-2 {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 24px;
  }
  .ec-grid-3 {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 24px;
  }
  .ec-grid-4 {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 24px;
  }
  .ec-grid-6 {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 24px;
  }

  /* CTA row */
  .ec-cta-row {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    gap: 14px;
    margin-top: 24px;
  }

  /* Premium Tabs (Flights / Stays / Cars / Transfers) */
  .ec-tabs {
    display: flex;
    align-items: center;
    gap: 18px;
    padding: 16px 22px;
    border-bottom: 1px solid rgba(28,140,130,0.22);
    background: rgba(10,12,15,0.55);
    backdrop-filter: blur(10px);
  }
  .ec-tab {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 10px 14px;
    border-radius: 999px;
    color: rgba(237,237,237,0.70);
    border: 1px solid transparent;
    transition: 160ms ease;
    font-size: 16px;
    font-weight: 550;
  }
  .ec-tab:hover {
    color: var(--ec-text);
    border-color: rgba(28,140,130,0.28);
    background: rgba(28,140,130,0.10);
  }
  .ec-tab-active {
    color: var(--ec-text);
    border-color: rgba(200,162,77,0.30);
    background: linear-gradient(135deg, rgba(28,140,130,0.16), rgba(200,162,77,0.10));
    box-shadow: 0 0 0 1px rgba(200,162,77,0.10), 0 18px 60px rgba(0,0,0,0.35);
  }

  /* Premium Buttons */
  .ec-btn {
    height: 54px;
    border-radius: var(--ec-radius-button);
    padding: 0 22px;
    font-size: 16px;
    font-weight: 650;
    letter-spacing: 0.01em;
    transition: 160ms ease;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    border: 1px solid rgba(28,140,130,0.25);
    background: rgba(15,17,20,0.55);
    color: var(--ec-text);
    box-shadow: var(--ec-shadow-hairline);
  }
  .ec-btn:hover {
    border-color: rgba(28,140,130,0.55);
    box-shadow: 0 0 0 3px rgba(28,140,130,0.16), var(--ec-shadow-card);
    transform: translateY(-1px);
  }

  /* Primary glowing CTA */
  .ec-btn-primary {
    min-width: 320px;
    background: linear-gradient(135deg, rgba(28,140,130,0.38), rgba(200,162,77,0.18));
    border-color: rgba(200,162,77,0.34);
    box-shadow:
      0 0 0 1px rgba(200,162,77,0.14),
      0 18px 60px rgba(0,0,0,0.45),
      0 0 40px rgba(28,140,130,0.20);
  }
  .ec-btn-primary:hover {
    box-shadow:
      0 0 0 3px rgba(200,162,77,0.16),
      0 22px 70px rgba(0,0,0,0.55),
      0 0 55px rgba(28,140,130,0.24);
  }

  /* Small helper text under inputs */
  .ec-help {
    margin-top: 10px;
    font-size: 13px;
    color: rgba(237,237,237,0.55);
  }

  /* Custom scrollbar for currency dropdown */
  .ec-currency-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: rgba(28, 140, 130, 0.4) rgba(15, 17, 20, 0.8);
  }
  .ec-currency-scrollbar::-webkit-scrollbar {
    width: 8px;
  }
  .ec-currency-scrollbar::-webkit-scrollbar-track {
    background: rgba(15, 17, 20, 0.8);
    border-radius: 4px;
  }
  .ec-currency-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(28, 140, 130, 0.4);
    border-radius: 4px;
    border: 1px solid rgba(28, 140, 130, 0.2);
  }
  .ec-currency-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(28, 140, 130, 0.6);
  }

  /* Custom scrollbar for chat messages */
  .ec-chat-messages-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: rgba(28, 140, 130, 0.5) rgba(15, 17, 20, 0.3);
  }
  .ec-chat-messages-scrollbar::-webkit-scrollbar {
    width: 10px;
  }
  .ec-chat-messages-scrollbar::-webkit-scrollbar-track {
    background: rgba(15, 17, 20, 0.3);
    border-radius: 5px;
  }
  .ec-chat-messages-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(28, 140, 130, 0.5);
    border-radius: 5px;
    border: 1px solid rgba(28, 140, 130, 0.2);
  }
  .ec-chat-messages-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(28, 140, 130, 0.7);
  }

  /* --- Ecovira: Currency dropdown panel --- */
  .ec-dropdown {
    background: rgba(10, 12, 15, 0.92) !important;
    border: 1px solid rgba(28, 140, 130, 0.35) !important;
    box-shadow: 0 18px 60px rgba(0,0,0,0.65) !important;
    border-radius: 16px !important;
    overflow: hidden !important;
    color: #EDEDED !important;
  }

  .ec-dropdown * {
    color: #EDEDED !important;
  }

  /* Section titles like FIAT CURRENCIES / CRYPTO */
  .ec-dropdown .ec-section-title {
    color: rgba(237,237,237,0.65) !important;
    letter-spacing: 0.16em !important;
    text-transform: uppercase !important;
    font-size: 12px !important;
  }

  /* Option row */
  .ec-dropdown .ec-item {
    color: #EDEDED !important;
    background: transparent !important;
  }

  .ec-dropdown .ec-item * {
    color: #EDEDED !important;
  }

  /* Hover */
  .ec-dropdown .ec-item:hover {
    background: rgba(28, 140, 130, 0.18) !important;
    box-shadow: inset 0 0 0 1px rgba(28, 140, 130, 0.35) !important;
    color: #EDEDED !important;
  }

  /* Selected */
  .ec-dropdown .ec-item[data-selected="true"],
  .ec-dropdown-item--active {
    background: rgba(28, 140, 130, 0.22) !important;
    box-shadow: inset 0 0 0 1px rgba(200, 162, 77, 0.35) !important;
    color: #EDEDED !important;
  }

  /* Search box inside dropdown */
  .ec-dropdown input,
  .ec-dropdown-search {
    color: #EDEDED !important;
    background-color: rgba(15, 17, 20, 0.55) !important;
  }

  .ec-dropdown input::placeholder,
  .ec-dropdown-search::placeholder {
    color: rgba(237,237,237,0.5) !important;
  }

  .ec-dropdown input:focus,
  .ec-dropdown-search:focus {
    outline: none !important;
    box-shadow: 0 0 0 4px rgba(28, 140, 130, 0.18) !important;
    border-color: rgba(28, 140, 130, 0.55) !important;
  }

  .ec-currency-trigger {
    color: var(--ec-text) !important;
  }

  .ec-currency-trigger * {
    color: var(--ec-text) !important;
  }

  /* Ensure secondary variant buttons have white text - HIGH SPECIFICITY */
  button.ec-button-secondary,
  button[data-variant="secondary"] {
    color: #FFFFFF !important;
  }
  
  button.ec-button-secondary:hover,
  button[data-variant="secondary"]:hover {
    color: #FFFFFF !important;
  }
  
  /* Also target any element with secondary variant class or data attribute */
  .ec-button-secondary,
  [data-variant="secondary"] {
    color: #FFFFFF !important;
  }
}

/* Global rule for secondary buttons - outside the main container for maximum specificity */
button[data-variant="secondary"],
button.ec-button-secondary,
.ec-button-secondary {
  color: #FFFFFF !important;
}

button[data-variant="secondary"]:hover,
button.ec-button-secondary:hover,
.ec-button-secondary:hover {
  color: #FFFFFF !important;
}

/* Chat widget quick question chips - ensure white text and glow */
.ec-chat-quick-chip {
  color: #FFFFFF !important;
  text-shadow: 0 0 8px rgba(28, 140, 130, 0.5) !important;
}

.ec-chat-quick-chip:hover {
  color: #FFFFFF !important;
  text-shadow: 0 0 12px rgba(28, 140, 130, 0.7), 0 0 20px rgba(28, 140, 130, 0.4) !important;
}

/* Chat launcher button - ensure it's always clickable */
.ec-chat-launcher {
  pointer-events: auto !important;
  z-index: 99999 !important;
  position: relative !important;
  cursor: pointer !important;
}

.ec-chat-launcher:hover {
  pointer-events: auto !important;
}

.ec-chat-launcher:active {
  pointer-events: auto !important;
}

/* ============================
   RESPONSIVE FIXES (PREVENT “CRAMPED” LOOK)
============================ */
@media (max-width: 1100px) {
  .ec-grid-4 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
@media (max-width: 680px) {
  .ec-container { padding-left: 18px; padding-right: 18px; }
  .ec-grid-3, .ec-grid-2, .ec-grid-4 { grid-template-columns: 1fr; }
  .ec-card { padding: 22px; }
  .ec-btn-primary { min-width: 100%; }
}

/* Results layout responsive */
@media (max-width: 1024px) {
  .ec-results-layout {
    grid-template-columns: 1fr !important;
  }
  .ec-results-sidebar {
    position: relative !important;
    top: auto !important;
  }
}
